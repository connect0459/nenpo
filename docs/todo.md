# todo

## Phase 1: MVP ✅ 完了

- [x] プロジェクトの初期化
- [x] Cargo.tomlの修正（edition、依存クレート追加）
- [x] アーキテクチャ設計のドキュメント化
- [x] オニオンアーキテクチャのディレクトリ構造作成
- [x] 設定ファイル読み込み機能の実装（TDD）
  - [x] Departmentエンティティ
  - [x] OutputFormat値オブジェクト
  - [x] Configエンティティ
  - [x] ConfigRepositoryトレイト
  - [x] TomlConfigRepository実装
- [x] GitHubデータ取得機能の実装（TDD）
  - [x] GitHubActivityエンティティ
  - [x] GitHubRepositoryトレイト
  - [x] GhCommandRepository実装（Phase 1: ダミーデータ）
- [x] Markdown出力機能の実装（TDD）
  - [x] Reportエンティティ
  - [x] OutputRepositoryトレイト
  - [x] MarkdownOutputRepository実装
- [x] CLIコマンドの実装
  - [x] CLI構造定義（clap）
  - [x] generateコマンド実装

## Phase 2: 拡張

- [x] 実際のGitHubデータ取得（gh コマンド実行）
  - [x] CommandExecutorトレイト定義
  - [x] GraphQL API実装
  - [x] MockCommandExecutorによるテスト
- [x] ローカルドキュメント読み込み
  - [x] DocumentContentエンティティ
  - [x] DocumentRepositoryトレイト
  - [x] LocalFileDocumentRepository実装
  - [x] Reportエンティティへのドキュメント情報追加
  - [x] Markdown出力へのドキュメントセクション追加
- [x] 複数部門のサポート
  - [x] ReportGeneratorサービス実装
  - [x] 複数部門ループ処理
  - [x] 部門フィルタ機能
  - [x] 年度期間計算
  - [x] main.rsへの統合
- [x] JSON/HTML形式での出力
  - [x] JsonOutputRepository実装
  - [x] HtmlOutputRepository実装
  - [x] ReportGeneratorにファイル拡張子パラメータ追加
  - [x] main.rsでフォーマット選択機能
- [x] Conventional Commitsによるテーマ別要約
  - [x] CommitTheme値オブジェクト実装
  - [x] Reportエンティティにtheme_summaryフィールド追加
  - [x] Markdown出力にCommit Themesセクション追加
  - [x] HTML出力にCommit Themesセクション追加
  - [x] JSON出力にtheme_summaryが含まれることを確認（serdeで自動対応）
  - [x] 実際のコミットメッセージ取得（Phase 2 完全実装: 基本機能）
    - [x] Commitエンティティ実装（SHA、メッセージ、作成者、日時、リポジトリ名）
    - [x] GitHubRepositoryトレイトに`fetch_commits()`メソッド追加
    - [x] GraphQLクエリ拡張（ページネーション対応）
    - [x] GhCommandRepositoryでコミット取得実装（再帰的ページネーション）
    - [x] MockCommandExecutor改良（複数レスポンス対応）
    - [x] ReportGeneratorでtheme_summary構築処理追加
    - [x] テスト作成（コミット取得、ページネーション、テーマ別要約）
  - [ ] Phase 2 完全実装: 最適化機能（残タスク）
    - [ ] 進捗表示機能（ProgressReporterトレイト）
    - [ ] エラーハンドリング強化（API制限エラー、リトライ処理）
    - [ ] キャッシュ機能（~/.cache/nenpo/にJSON保存）
    - [ ] 並列処理最適化（tokio非同期処理）
    - [ ] 統合テスト実施（80%カバレッジ確認）
    - [ ] 実際のGitHubデータで動作確認
    - [ ] 注意事項: API制限（認証済み5,000req/h）、大規模プロジェクトのメモリ消費
